<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>还不会Vue3？一篇笔记带你快速入门 | William Wu&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/vuepress-blog/img/favicon.ico">
    <meta name="description" content="William Wu的博客">
    <link rel="preload" href="/vuepress-blog/assets/css/0.styles.37fe6c2b.css" as="style"><link rel="preload" href="/vuepress-blog/assets/js/app.6e00fe84.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/7.2d53fe4f.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/57.3c28d478.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/js/1.f7ee9676.js"><link rel="prefetch" href="/vuepress-blog/assets/js/10.b4107c20.js"><link rel="prefetch" href="/vuepress-blog/assets/js/100.3e28addf.js"><link rel="prefetch" href="/vuepress-blog/assets/js/101.78435e54.js"><link rel="prefetch" href="/vuepress-blog/assets/js/102.4ee27135.js"><link rel="prefetch" href="/vuepress-blog/assets/js/103.859a6a44.js"><link rel="prefetch" href="/vuepress-blog/assets/js/104.6b1a5b52.js"><link rel="prefetch" href="/vuepress-blog/assets/js/105.f600bf77.js"><link rel="prefetch" href="/vuepress-blog/assets/js/106.425c2372.js"><link rel="prefetch" href="/vuepress-blog/assets/js/107.ee0cb1e7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/108.b2e6bffc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/109.97ce0ea4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/11.94b39620.js"><link rel="prefetch" href="/vuepress-blog/assets/js/110.d65b4011.js"><link rel="prefetch" href="/vuepress-blog/assets/js/111.28dfa48c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/112.6d74b466.js"><link rel="prefetch" href="/vuepress-blog/assets/js/113.0ca4f5d9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/114.a9a1fe16.js"><link rel="prefetch" href="/vuepress-blog/assets/js/115.1fd807d9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/116.70a3ae35.js"><link rel="prefetch" href="/vuepress-blog/assets/js/117.276332b6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/118.d3bf4413.js"><link rel="prefetch" href="/vuepress-blog/assets/js/119.21b2b555.js"><link rel="prefetch" href="/vuepress-blog/assets/js/12.403f835f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/120.9ac96a53.js"><link rel="prefetch" href="/vuepress-blog/assets/js/121.ee19205b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/122.ac5a4182.js"><link rel="prefetch" href="/vuepress-blog/assets/js/123.f74bd9d9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/124.f0aae912.js"><link rel="prefetch" href="/vuepress-blog/assets/js/125.75f6477a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/126.b3de6604.js"><link rel="prefetch" href="/vuepress-blog/assets/js/127.4de40117.js"><link rel="prefetch" href="/vuepress-blog/assets/js/128.69d929a3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/13.dea19516.js"><link rel="prefetch" href="/vuepress-blog/assets/js/14.d5c1a527.js"><link rel="prefetch" href="/vuepress-blog/assets/js/15.b2ecaf4b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/16.db40c74c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/17.8b81caf4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/18.bdbab762.js"><link rel="prefetch" href="/vuepress-blog/assets/js/19.c0cf46cf.js"><link rel="prefetch" href="/vuepress-blog/assets/js/20.cb8775d1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/21.40219664.js"><link rel="prefetch" href="/vuepress-blog/assets/js/22.d64c780c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/23.42e15140.js"><link rel="prefetch" href="/vuepress-blog/assets/js/24.432b3fbc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/25.8c44fec8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/26.e6051055.js"><link rel="prefetch" href="/vuepress-blog/assets/js/27.fb53f0fb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/28.60bca441.js"><link rel="prefetch" href="/vuepress-blog/assets/js/29.1be7397c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/3.136ff634.js"><link rel="prefetch" href="/vuepress-blog/assets/js/30.505ce938.js"><link rel="prefetch" href="/vuepress-blog/assets/js/31.1b1fce7f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/32.21548a49.js"><link rel="prefetch" href="/vuepress-blog/assets/js/33.b51b407a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/34.355f9cce.js"><link rel="prefetch" href="/vuepress-blog/assets/js/35.9ce5fd83.js"><link rel="prefetch" href="/vuepress-blog/assets/js/36.5431a5fa.js"><link rel="prefetch" href="/vuepress-blog/assets/js/37.5e0bb2c2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/38.ac393103.js"><link rel="prefetch" href="/vuepress-blog/assets/js/39.4b2a2262.js"><link rel="prefetch" href="/vuepress-blog/assets/js/4.5e7582dc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/40.9280b51b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/41.002b6dd7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/42.1b8e6662.js"><link rel="prefetch" href="/vuepress-blog/assets/js/43.1e8d6b7c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/44.d0b84c72.js"><link rel="prefetch" href="/vuepress-blog/assets/js/45.4ee86323.js"><link rel="prefetch" href="/vuepress-blog/assets/js/46.2cf04455.js"><link rel="prefetch" href="/vuepress-blog/assets/js/47.0ddfc35c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/48.86befbe9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/49.db6b99b1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/5.4b916ac4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/50.8cddd757.js"><link rel="prefetch" href="/vuepress-blog/assets/js/51.d86e11f5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/52.c734683b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/53.60838c39.js"><link rel="prefetch" href="/vuepress-blog/assets/js/54.2a4ad983.js"><link rel="prefetch" href="/vuepress-blog/assets/js/55.247690ca.js"><link rel="prefetch" href="/vuepress-blog/assets/js/56.418dadb4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/58.f8d0967a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/59.53ce0108.js"><link rel="prefetch" href="/vuepress-blog/assets/js/6.355a8f07.js"><link rel="prefetch" href="/vuepress-blog/assets/js/60.d4b4abe1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/61.e809079c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/62.8c16fbcc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/63.3e21188d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/64.adc4acbb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/65.785f539f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/66.be79db4e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/67.27ee8a98.js"><link rel="prefetch" href="/vuepress-blog/assets/js/68.ce63c55f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/69.c888fef8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/70.f520be35.js"><link rel="prefetch" href="/vuepress-blog/assets/js/71.0e036b39.js"><link rel="prefetch" href="/vuepress-blog/assets/js/72.2a79d934.js"><link rel="prefetch" href="/vuepress-blog/assets/js/73.8820a069.js"><link rel="prefetch" href="/vuepress-blog/assets/js/74.e6a8ccd3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/75.4a779789.js"><link rel="prefetch" href="/vuepress-blog/assets/js/76.31afc92e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/77.22ff2bfa.js"><link rel="prefetch" href="/vuepress-blog/assets/js/78.bd33db03.js"><link rel="prefetch" href="/vuepress-blog/assets/js/79.0997de77.js"><link rel="prefetch" href="/vuepress-blog/assets/js/8.4f46ad19.js"><link rel="prefetch" href="/vuepress-blog/assets/js/80.13b28fd9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/81.3667cbaa.js"><link rel="prefetch" href="/vuepress-blog/assets/js/82.97bc529f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/83.e97dcb9e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/84.a31d5202.js"><link rel="prefetch" href="/vuepress-blog/assets/js/85.c67a5ac3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/86.54f888da.js"><link rel="prefetch" href="/vuepress-blog/assets/js/87.4a369fc5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/88.40dfee79.js"><link rel="prefetch" href="/vuepress-blog/assets/js/89.cd99730f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/9.fae5a856.js"><link rel="prefetch" href="/vuepress-blog/assets/js/90.96d9a0f4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/91.d4118fd2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/92.515544a5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/93.0e928d02.js"><link rel="prefetch" href="/vuepress-blog/assets/js/94.295d68fa.js"><link rel="prefetch" href="/vuepress-blog/assets/js/95.f7e8be92.js"><link rel="prefetch" href="/vuepress-blog/assets/js/96.558f477b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/97.47dee1d2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/98.5b9f2ec3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/99.1968cfa2.js">
    <link rel="stylesheet" href="/vuepress-blog/assets/css/0.styles.37fe6c2b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-meteorlxy"><header class="header" data-v-7a046aea><div data-v-e4145d0a data-v-7a046aea><nav class="navbar" data-v-e4145d0a><div class="container" data-v-e4145d0a><a href="/vuepress-blog/" class="router-link-active" data-v-e4145d0a><span class="navbar-site-name" data-v-e4145d0a>
          William Wu's Blog
        </span></a> <div class="navbar-toggler" data-v-e4145d0a><svg class="icon" style="font-size:1.2em;" data-v-e4145d0a data-v-e4145d0a><title data-v-e4145d0a data-v-e4145d0a>menu</title><use xlink:href="#icon-menu" data-v-e4145d0a data-v-e4145d0a></use></svg></div> <div class="navbar-links" data-v-e4145d0a><a href="/vuepress-blog/" class="navbar-link" data-v-e4145d0a>
            首页
          </a><a href="/vuepress-blog/posts/" class="navbar-link router-link-active" data-v-e4145d0a>
            文章
          </a><a href="/vuepress-blog/about/" class="navbar-link" data-v-e4145d0a>
            关于
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-e4145d0a></div></div> <div class="banner" data-v-98d6aa8c data-v-7a046aea data-v-7a046aea><div class="container" data-v-98d6aa8c><div class="center" data-v-98d6aa8c><h1 data-v-98d6aa8c data-v-7a046aea>
          还不会Vue3？一篇笔记带你快速入门
        </h1></div></div></div></header> <div class="container clearfix show-aside" data-v-4dd605a1 data-v-4dd605a1><main class="main" data-v-4dd605a1><div class="post" data-v-4dd605a1 data-v-4dd605a1><section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      发布时间 : 2022-01-03
    </span> <!----></section> <section class="post-links" data-v-4e23451f><a href="/vuepress-blog/posts/2022/01/03/_03.html" class="post-link" data-v-4e23451f>
      上一篇 : 【Vue】带你快速上手Vue3 - 使用 - Composition API - 响应式原理 - 新特性
    </a> <a href="/vuepress-blog/posts/2022/01/03/_01.html" class="post-link" data-v-4e23451f>
      下一篇 : yarn &amp; npm 使用和取消 taobao 镜像,以及使用cnpm
    </a></section></section> <article class="main-div"><div class="post-content content content__default"><blockquote><p>本文转载自：<a href="https://juejin.cn/post/7006518993385160711" target="_blank" rel="noopener noreferrer">还不会 Vue3？一篇笔记带你快速入门<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p></p><div class="table-of-contents"><ul><li><a href="#vue3-简介">Vue3 简介</a></li><li><a href="#基础工作">基础工作</a><ul><li><a href="#安装-vue-cli">安装 vue-cli</a></li><li><a href="#创建一个项目">创建一个项目</a></li></ul></li><li><a href="#vue3-入门">Vue3 入门</a><ul><li><a href="#composition-api">Composition API</a></li><li><a href="#fragment">Fragment</a></li><li><a href="#script-差异">script 差异</a></li><li><a href="#setup">setup</a></li><li><a href="#ref">ref</a></li><li><a href="#ref-获取元素">ref 获取元素</a></li><li><a href="#torefs">toRefs</a></li><li><a href="#toref">toRef</a></li><li><a href="#判断响应式">判断响应式</a></li><li><a href="#customref">customRef</a></li><li><a href="#shallowref-和-shallowreactive">shallowRef 和 shallowReactive</a></li><li><a href="#readonly-和-shallowreadonly">readonly 和 shallowReadonly</a></li><li><a href="#toraw-和-markraw">toRaw 和 markRaw</a></li><li><a href="#computed-计算属性">computed 计算属性</a></li><li><a href="#watch-侦听器">watch 侦听器</a></li><li><a href="#watcheffect">watchEffect</a></li><li><a href="#provide-inject">provide / inject</a></li><li><a href="#teleport-传送组件">Teleport 传送组件</a></li><li><a href="#vue3-生命周期">Vue3 生命周期</a></li><li><a href="#全局api-转移">全局API 转移</a></li></ul></li><li><a href="#结语">结语</a></li></ul></div><p></p> <p>一直都没有去接触 Vue3，在之前暑假的时间，就趁这个机会去好好的学习一下，这篇文章就是我之前学习 Vue3 做的笔记，做笔记一方面让自己更加理解和掌握新的特性这些知识点，另一方面也希望能让大家入门 Vue3，自己学到了才是赚到了，结语注明参考资料</p> <h2 id="vue3-简介"><a href="#vue3-简介" class="header-anchor">#</a> Vue3 简介</h2> <p><strong>面临的问题</strong>：随着功能的增长，复杂组件的代码变得难以维护，<code>Vue3</code> 就随之而来，<code>TypeScript</code> 使用的越来越多，<code>Vue3</code>就是 <code>TS</code> 写的所以能够更好的支持 <code>TypeScript</code></p> <p>在这里介绍就这么简单</p> <p><code>vue2</code> 的绝大多数的特性 在 <code>Vue3</code> 都能使用，毕竟 <code>Vue</code> 是渐进式的</p> <p>响应式原理进行使用 <code>Proxy</code> 实现，<code>v-model</code> 可以传参了等等新特性</p> <h2 id="基础工作"><a href="#基础工作" class="header-anchor">#</a> 基础工作</h2> <p>使用<code>Vue3</code>的话，那么必须通过使用构建工具创建一个 <code>Vue3</code> 项目</p> <h3 id="安装-vue-cli"><a href="#安装-vue-cli" class="header-anchor">#</a> 安装 vue-cli</h3> <div class="language- extra-class"><pre class="language-text"><code># npm
npm install -g @vue/cli
# yarn
yarn global add @vue/cli
</code></pre></div><h3 id="创建一个项目"><a href="#创建一个项目" class="header-anchor">#</a> 创建一个项目</h3> <p>使用 <code>create</code> 命令行创建 或者 用 <code>ui</code> 可视化创建</p> <p>大家用 <code>Vue</code> 都用了这么久，我就不一一说怎么去创建了</p> <div class="language- extra-class"><pre class="language-text"><code># create
vue create 项目名
# 可视化
vue ui
</code></pre></div><p>当然也可以选择 <code>vite</code> ，<code>vite</code> 创建的速度比 上面的方法快了一些</p> <div class="language- extra-class"><pre class="language-text"><code>npm init vite-app 项目名
cd 项目名
npm install
npm run dev
</code></pre></div><h2 id="vue3-入门"><a href="#vue3-入门" class="header-anchor">#</a> Vue3 入门</h2> <h3 id="composition-api"><a href="#composition-api" class="header-anchor">#</a> Composition API</h3> <blockquote><p><code>Vue3</code> 提出了 <code>Composition API</code></p></blockquote> <p>在 <strong>Vue2.X</strong> 我们使用的是 <strong>OptionAPI</strong> 里面有我们熟悉的 <code>data</code>、<code>computed</code>、<code>methods</code>、<code>watch</code>...</p> <p>在 <code>Vue3</code> 中，我们依旧可以使用 <strong>OptionAPI</strong> 当然不建议 和 <code>Vue3</code> 混用</p> <p>在 <code>Vue2</code> 中，我们实现一个功能得分到不同的地方，把数据放在 <code>data</code> ,<code>computed</code> 方法放在 <code>methods</code> 里面，分开的太散乱了，几个功能还好，几十个上百个，那就有点...</p> <p>所以 <code>Vue3</code> 提出了 <strong>Composition API</strong> ，它可以把 <code>一个逻辑的代码都收集在一起</code> 单独写个<code>hook</code>,然后再引入，这样就不到处分布，显得很乱了</p> <h3 id="fragment"><a href="#fragment" class="header-anchor">#</a> Fragment</h3> <blockquote><p>在 <code>template</code> 中不再需要一个根元素包裹</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Vue logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./assets/logo.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HelloWorld</span> <span class="token attr-name">msg</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Welcome to Your Vue.js + TypeScript App<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>实际上内部会将多个标签包含在一个<code>Fragment</code>虚拟元素中</p> <p>好处: 减少标签层级, 减小内存占用</p> <h3 id="script-差异"><a href="#script-差异" class="header-anchor">#</a> script 差异</h3> <blockquote><p>来看看 script 和 Vue2 的区别</p></blockquote> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里的属性 和 方法 会合并到 data 函数 和 methods 对象里</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><ul><li>可以再 <code>script</code> 使用 <code>ts</code> 只需 设置 <code>lang</code> 即可</li> <li><code>defineComponent</code> 方法创建一个组件</li> <li><code>export default</code> 直接导出一个组件</li></ul> <h3 id="setup"><a href="#setup" class="header-anchor">#</a> setup</h3> <blockquote><p><code>setup</code> 是 <code>Composition API</code> 的入口</p></blockquote> <h4 id="setup-执行顺序"><a href="#setup-执行顺序" class="header-anchor">#</a> <code>setup</code> 执行顺序</h4> <p>它在<code>beforeCreate</code><strong>之前执行一次</strong>，<code>beforeCreate</code>这个钩子 的任务就是初始化，在它之前执行，那么 <code>this</code> 就没有被初始化 <code>this = undefined</code> 这样就不能通过 <code>this</code> 来调用方法 和 获取属性</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="setup-返回值"><a href="#setup-返回值" class="header-anchor">#</a> <code>setup</code> 返回值</h4> <p><code>setup</code> 返回的是一个<strong>对象</strong>，这个对象的属性会与组件中 <code>data</code> 函数返回的对象进行<strong>合并</strong>，返回的方法和 <code>methods</code> 合并，合并之后直接可以在模板中使用，如果有重名的情况，会使用 <code>setup</code> 返回的<strong>属性</strong>和<strong>方法</strong>，<code>methods</code> 和 <code>data</code> 能够拿到 <code>setup</code> 中的方法应该进行了合并，反之 <code>setup</code> 不能拿到它们的属性和方法，因为这个时候 <code>this</code> = <code>undefined</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  {{ datamsg }}
  {{ setupmsg }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;App&quot;</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// data 中可以拿到 setup 返回对象的属性</span>
      datamsg<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>setupmsg<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      setupmsg<span class="token operator">:</span> <span class="token string">&quot;我是setup中的数据&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="suspense-组件"><a href="#suspense-组件" class="header-anchor">#</a> <code>Suspense</code> 组件</h4> <blockquote><p><code>setup</code> 使用 <code>async</code>/<code>await</code></p></blockquote> <p>我们需要 <code>setup</code> 返回数据那么它肯定就不能使用 <code>async</code> 修饰，这样返回 <code>promise</code> 是我们不想看见情况，如果我们硬要用 <code>async</code> 修饰，我们就得用的在它的父组件外层需要嵌套一个<code>suspense</code>(不确定)内置组件，里面放置一些不确定的操作，比如我们就可以把异步组件放入进去</p> <p><strong>1.子组件</strong></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  {{ res }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;Son&quot;</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;地址&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>2.父组件</strong></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 子组件--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Son</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="setup-参数"><a href="#setup-参数" class="header-anchor">#</a> <code>setup</code> 参数</h4> <blockquote><p><code>setup</code>(<code>props</code>, <code>context</code>)</p></blockquote> <p><code>setup</code> 函数中的第一个参数是 <code>props</code>。它接收父组件传递的值，是的就是父子组件信息传递的 <code>props</code></p> <p>第二个参数是 <code>context</code> 里面包含 3 个属性 <code>{ attrs, slots, emit }</code>，这三个属性大家看名字就应该知道是什么吧 分别对应 <code>this.$attrs</code>，<code>this.$slots</code>，<code>this.$emit</code></p> <p>*attrs: 除了 <code>props</code> 中的其他属性
*slots: 父组件传入插槽内容的对象
*emit: 和用于父子组件通信</p> <h3 id="ref"><a href="#ref" class="header-anchor">#</a> ref</h3> <blockquote><p>定义/转为 响应式</p></blockquote> <p>在上面 <code>setup</code> 写的数据都<strong>不是响应式的</strong>，修改了数据，视图并不会更新</p> <p>在 <code>Vue3</code> 中提供了两种方式定义响应式数据，先来介绍下 <code>ref</code></p> <p>导入 <code>ref</code> 方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>你可以先声明一个<strong>基本类型</strong>变量后再当做 <code>ref</code> 的形参穿进去</li> <li>或者直接在 <code>ref</code> 中传入</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 方式一</span>
    <span class="token keyword">let</span> number1 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token comment">// 方式二</span>
    <span class="token keyword">let</span> number2 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>来查看一下 <code>number1</code> 是什么吧</p> <p><img alt="1" data-src="/vuepress-blog/img/post/2022-01-03-02/1.awebp" loading="lazy" class="lazy"></p> <p>可以看见的是 <code>number1</code> 是一个 <code>Ref</code> 对象，我们设置的 <code>10</code> 这个值在这个对象的 <code>value</code> 属性上</p> <p>也就是说我们修改的时候必须要修改的是 <code>number1.value</code></p> <p>通过给<code>value</code>属性添加 <code>getter</code>/<code>setter</code> 来实现对数据的劫持</p> <p>但是在模板上使用的时候 不用写 <code>number1.value</code> 直接写 <code>number1</code> 即可</p> <p>在模板编译的时候回自动加上 <code>value</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  {{ number1 }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>updateNum<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Son&quot;</span><span class="token punctuation">,</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> number1 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 修改 number1</span>
      <span class="token keyword">function</span> <span class="token function">updateNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        number1<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        number1<span class="token punctuation">,</span>
        updateNum<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img alt="2" data-src="/vuepress-blog/img/post/2022-01-03-02/2.awebp" loading="lazy" class="lazy"></p> <p>使用起来完全没有问题</p> <p>刚才强调了说 <code>ref</code> 接收 基本类型的数据，那么它可以接收 复杂类型吗，<code>object</code> 类型等，当然可以</p> <p>给 <code>ref</code> 传入复杂类型，其实它是调用 <code>reactive</code> 来实现的</p> <p><code>reactive</code> 下面会提到</p> <h3 id="ref-获取元素"><a href="#ref-获取元素" class="header-anchor">#</a> ref 获取元素</h3> <p>同样的 <code>ref</code> 还可以用了获取元素</p> <p>大家在 <code>Vue2.X</code> 中是怎么获取的呢，先在 标签上定义 <code>:ref='XXX'</code> 然后 <code>this.$refs.XXX</code> 来获取</p> <p>在 <code>Vue3</code> 上获取元素就有些许不同了</p> <blockquote><p>1.首先在 模板元素上 ref='XXX' 这里不用 v-bind</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>haha<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>haha<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>2.在 <code>setup</code> 中</p></blockquote> <p>得给 <code>ref</code> 指定类型 <code>HTMLElement</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> haha <span class="token operator">=</span> ref<span class="token operator">&lt;</span>HTMLElement<span class="token operator">|</span><span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>haha<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    haha<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>如果在组件中需要使用到 <code>haha</code> ，就必须把 <code>haha</code> <code>return</code> 出去合并 <code>data</code></p> <p>我们来看看打印的是什么</p> <p><img alt="3" data-src="/vuepress-blog/img/post/2022-01-03-02/3.awebp" loading="lazy" class="lazy"></p> <p>可以看见的是 <code>haha</code> 是个 <code>Ref</code> 对象，<code>value</code> 值就是我们想要获取到的元素</p> <p>然后我们可以对 <code>haha</code> 这个 <code>DOM</code> 元素进行操作，比如这个</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>haha<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token string">&quot;20px&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="reactive"><a href="#reactive" class="header-anchor">#</a> reactive</h4> <p><code>reactive</code> 接收一个普通对象然后返回该普通对象的响应式<code>代理对象</code></p> <p>没错 它的底层就是使用 <code>Proxy</code> 进行代理</p> <blockquote><p>简单写个 Vue3 响应式例子来说下 <code>Proxy</code></p></blockquote> <p><code>new Proxy(target, handler)</code></p> <ul><li><code>target</code> ：要使用 <code>Proxy</code> 包装的目标对象（可以是任何类型的对象，包括原生数组，函数，甚至另一个代理）</li> <li><code>handler</code>：一个通常以函数作为属性的对象，各属性中的函数分别定义了在执行各种操作时代理 <code>p</code></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 模拟 Vue data</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
  msg<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 模拟 Vue 的一个实例</span>
<span class="token comment">// Proxy 第一个</span>
<span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// get() 获取值</span>
  <span class="token comment">// target 表示需要代理的对象这里指的就是 data</span>
  <span class="token comment">// key 就是对象的 键</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 设置值</span>
  <span class="token comment">// newValue 是设置的值</span>
  <span class="token keyword">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 也先判断下是否和之前的值一样 节省性能</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> newValue<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token comment">// 进行设置值</span>
    target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><code>reactive</code> 基础用法</p></blockquote> <p>导入，当然写的时候，<code>vscode</code> 会自动帮你引入</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>简单使用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'小浪'</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>来看看返回的 <code>Proxy</code> 对象吧</p> <p><img alt="4" data-src="/vuepress-blog/img/post/2022-01-03-02/4.awebp" loading="lazy" class="lazy"></p> <p>数据都在 <code>target</code> 中，</p> <p>在模板使用直接 <code>{{</code> <code>obj.name</code> <code>}}</code> 即可</p> <p>修改直接修改 <code>obj[name]</code> <code>=</code> <code>‘xxx’</code></p> <p>操作代理对象,obj 中的数据也会随之变化，同时如果想要在操作数据的时候,界面也要跟着重新更新渲染,那么也是操作代理对象</p> <blockquote><p>响应式的数据是深层次的（递归深度响应式）</p></blockquote> <p>对于多层嵌套的数据也是响应式的</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'小浪'</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
        phone<span class="token operator">:</span> <span class="token punctuation">{</span>
            p_name<span class="token operator">:</span> <span class="token string">'小米'</span><span class="token punctuation">,</span>
            p_apps<span class="token operator">:</span> <span class="token punctuation">{</span>
                app_name<span class="token operator">:</span> <span class="token string">'小米运动'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">function</span> <span class="token function">upadateName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">.</span>phone<span class="token punctuation">.</span>p_apps<span class="token punctuation">.</span>app_name <span class="token operator">=</span> <span class="token string">'掘金'</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">,</span>
        upadateName<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p><img alt="5" data-src="/vuepress-blog/img/post/2022-01-03-02/5.awebp" loading="lazy" class="lazy"></p> <blockquote><p><code>shallowReactive</code></p></blockquote> <p>它是一个简单的 reactive ，只把第一层的对象改为响应式，这里就不多说了</p> <blockquote><p>使用 <code>ref</code> 传入对象</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'小浪'</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img alt="6" data-src="/vuepress-blog/img/post/2022-01-03-02/6.awebp" loading="lazy" class="lazy"></p> <p>实际上是 <code>ref</code> 使用 <code>reactive</code> 来进行操作的</p> <h3 id="torefs"><a href="#torefs" class="header-anchor">#</a> toRefs</h3> <p>这个方法可以把 <code>reactive</code> 响应式对象，转化为 普通对象，普通对象的每个属性都是 <code>Ref</code> 对象，这样的话保证了 <code>reactive</code> 的每个属性还是响应式的，我们还可以把每个属性进行分解使用，这样在组件就不用 <strong>obj[属性]</strong>，代码量减轻了，yyds</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'小浪'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> userObj <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userObj<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img alt="7" data-src="/vuepress-blog/img/post/2022-01-03-02/7.awebp" loading="lazy" class="lazy"></p> <p>可以看见 <code>name</code> 和 <code>age</code> 已经变成了 <code>Ref</code> 对象</p> <p>我们可以解构 出 <code>name</code> 和 <code>age</code> 单独使用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'小浪'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> userObj <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>userObj<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="toref"><a href="#toref" class="header-anchor">#</a> toRef</h3> <p>还有一个 <code>toRef</code> 方法，它的作用和 <code>toRefs</code> 差不多，但是它只能把响应式对象/普通对象的<strong>某一个</strong>属性变为 <code>Ref</code> 对象</p> <blockquote><p>可以用来为源响应式对象上的 <code>property</code> 性创建一个 <code>ref</code>。然后可以将 <code>ref</code> 传递出去，从而保持对其源 <code>property</code> 的响应式连接。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">useSomeFeature</span><span class="token punctuation">(</span><span class="token function">toRef</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">useSomeFeature</span><span class="token punctuation">(</span><span class="token parameter">foo<span class="token operator">:</span> Ref</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>拷贝了一份新的数据值单独操作, 更新时相互不影响</p> <p>当您要将 <code>prop</code> 的 <code>ref</code> 传递给复合函数时，<code>toRef</code> 很有用</p> <p>可以从官方文档看出，用于在于组件之前的传递数据 从 <code>props</code> 拿出 <code>'foo'</code> 属性给复合函数，复合函数 <code>useSomeFeature</code>，接收的参数 <code>foo</code> 为 <code>Ref</code> 类型，刚好可以使用<code>toRef</code> 来进行转化</p> <h3 id="判断响应式"><a href="#判断响应式" class="header-anchor">#</a> 判断响应式</h3> <blockquote><p>几个判断是否哪种响应式创建的方法</p></blockquote> <ol><li><code>isRef</code>: 检查一个值是否为一个 ref 对象</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> ref1 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isRef</span><span class="token punctuation">(</span>ref1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><ol start="2"><li><code>isReactive</code>: 检查一个对象是否是由 <code>reactive</code> 创建的响应式代理</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> ref2 <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;小浪&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isReactive</span><span class="token punctuation">(</span>ref2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><ol start="3"><li><code>isReadonly</code>: 检查一个对象是否是由 <code>readonly</code> 创建的只读代理</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> ref3 <span class="token operator">=</span> <span class="token function">readonly</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;小浪&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isReadonly</span><span class="token punctuation">(</span>ref3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><ol start="4"><li><code>isProxy</code>: 检查一个对象是否是由 <code>reactive</code> 或者 <code>readonly</code> 方法创建的代理</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> ref2 <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;小浪&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isProxy</span><span class="token punctuation">(</span>ref2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token keyword">let</span> ref3 <span class="token operator">=</span> <span class="token function">readonly</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;小浪&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isProxy</span><span class="token punctuation">(</span>ref3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="customref"><a href="#customref" class="header-anchor">#</a> customRef</h3> <p>上面提到了这么多的 <code>Ref</code> 都是 Vue 帮我们内置的，</p> <p>我们可以通过 <code>customRef</code> 实现我们自己的 <code>Ref</code></p> <blockquote><p>创建一个自定义的 ref，并对其依赖项跟踪和更新触发进行显式控制。它需要一个工厂函数，该函数接收 <code>track</code> 和 <code>trigger</code> 函数作为参数，并应返回一个带有 <code>get</code> 和 <code>set</code> 的对象。</p></blockquote> <p>官方文档给了一个防抖的例子，我们也写个来看</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>keyword<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ keyword }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> customRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 不确定类型所以这里使用泛型</span>
<span class="token keyword">function</span> useDebouncedRef<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 定时器</span>
  <span class="token keyword">let</span> timeout<span class="token operator">:</span> number<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">track<span class="token punctuation">,</span> trigger</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 告诉Vue追踪数据</span>
        <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">set</span><span class="token punctuation">(</span>newValue<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
        timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
          <span class="token comment">// 告诉Vue去触发界面更新</span>
          <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> keyword <span class="token operator">=</span> <span class="token function">useDebouncedRef</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      keyword<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="shallowref-和-shallowreactive"><a href="#shallowref-和-shallowreactive" class="header-anchor">#</a> <code>shallowRef</code> 和 <code>shallowReactive</code></h3> <p>浅的响应式，一般用的不多，我们使用 <code>ref</code> 和 <code>reactive</code> 比较多</p> <blockquote><p><code>shallowReactive</code></p></blockquote> <p>对象结构多层嵌套，但是我们的需求只需要修改最外层的数据，就不用把里面的嵌套结构都转为响应式，这样使用浅的响应式提高性能，只有最外一层是响应式</p> <p>比较容易理解，我这就里就不举例子了</p> <blockquote><p><code>shallowRef</code></p></blockquote> <p>我们之前说过 <code>ref</code> 也能传入一个对象，实际上还是调用 <code>reactive</code> 返回 <code>Proxy</code> 代理对象，如果内层还有对象，还是使用 <code>reactive</code> 进行处理</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;小明&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 实际上是调用 reactive 去完成的，把 ref的 value 当作 key ,value的值，当作 key 的值 给 reactive</span>
<span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;小明&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>同样的 <code>shallowRef</code> 处理 对象类型，是交给 <code>shallowReactive</code> 去完成</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;小明&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 实际上是调用 reactive 去完成的，把 ref的 value 当作 key ,value的值，当作 key 的值 给 reactive</span>
<span class="token function">shallowReactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;小明&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这样子我们就明白了，为啥 只处理了 <code>value</code> 的响应式，不进行对象的 <code>reactive</code> 处理，适用于会被替换的数据</p> <p><code>【注意】</code>：<code>shallowRef</code> 创建一个 <code>ref</code> ，将会追踪它的 <code>value</code> 更改操作，但是并不会对变更后的 <code>value</code> 做响应式代理转换</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> info1 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'小浪'</span><span class="token punctuation">,</span>
    notebook<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'小米笔记本'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> info2 <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'小明'</span><span class="token punctuation">,</span>
    notebook<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'小米笔记本'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info1<span class="token punctuation">,</span> info2<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    info1<span class="token punctuation">,</span>
    info2<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>我们来打印下两个对象</p> <p><img alt="8" data-src="/vuepress-blog/img/post/2022-01-03-02/8.awebp" loading="lazy" class="lazy"></p> <p>可以看见的是 <code>Ref</code> 的 <code>value</code> 值是用 <code>reactive</code> 返回的 <code>Proxy</code> 对象，</p> <p><code>shallowRef</code> 的 <code>value</code> 是普通对象</p> <h3 id="readonly-和-shallowreadonly"><a href="#readonly-和-shallowreadonly" class="header-anchor">#</a> <code>readonly</code> 和 <code>shallowReadonly</code></h3> <blockquote><p><code>readonly</code> 深度只读</p></blockquote> <p>设置普通对象或者是响应式对象为只读，不能进行修改，看上面的名字就知道是深度的，深度是什么概念大家差不多都清楚，递归把内层的每一个属性都设置为只读，进行修改操作就会报错，提高了安全性</p> <p>基本使用：</p> <p>用什么就导入什么</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> readonly <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>果然在编译之前就报错了 <code>Error</code>: <code>无法分配到 &quot;name&quot; ，因为它是只读属性</code></p> <p>无论是内层还是外层都只读，是深度检测的</p> <p><img alt="9" data-src="/vuepress-blog/img/post/2022-01-03-02/9.awebp" loading="lazy" class="lazy"></p> <blockquote><p><code>shallowReadonly</code> 浅度只读</p></blockquote> <p>浅度的话只针对最外面一层不关心 内层</p> <p>可以看下面的例子 只有外层的 <code>name</code> 报错，修改内层没有错误</p> <p><img alt="10" data-src="/vuepress-blog/img/post/2022-01-03-02/10.awebp" loading="lazy" class="lazy"></p> <h3 id="toraw-和-markraw"><a href="#toraw-和-markraw" class="header-anchor">#</a> <code>toRaw</code> 和 <code>markRaw</code></h3> <blockquote><p>这两个用的还是比较少</p></blockquote> <p>我这里就简单的过一下</p> <blockquote><p><code>toRaw</code>: 将一个响应式对象转为普通对象</p></blockquote> <p>简单使用：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> info1 <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'小浪'</span><span class="token punctuation">,</span>
    notebook<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'小米笔记本'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> rawInfo <span class="token operator">=</span> <span class="token function">toRaw</span><span class="token punctuation">(</span>info1<span class="token punctuation">)</span> <span class="token comment">// 返回普通对象</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info1<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rawInfo<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p><img alt="11" data-src="/vuepress-blog/img/post/2022-01-03-02/11.awebp" loading="lazy" class="lazy"></p> <p>两个打印出来，一个是响应式对象，通过 <code>toRaw</code> 后变成了普通对象</p> <blockquote><p><code>markRaw</code>: 标记一个对象，让它永远不会转为响应式对象，返回值是本身</p></blockquote> <p>比如： 一些不变的数据死数据，还有一些第三方类实例，不用转为响应式对象，提高性能</p> <p>简单使用：</p> <p>这里使用 两个一样的对象，一个进行 <code>markRaw</code> 处理，一个不进行 <code>markRaw</code> 处理</p> <p>然后同样使用 <code>reactive</code> 转为 响应式</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'小浪'</span><span class="token punctuation">,</span>
    notebook<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'小米笔记本'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 进行标记</span>
  <span class="token keyword">let</span> markRawObj <span class="token operator">=</span> <span class="token function">markRaw</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token comment">// 尝试转为响应式</span>
  <span class="token keyword">let</span> reactObj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>markRawObj<span class="token punctuation">)</span>
  <span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'小浪'</span><span class="token punctuation">,</span>
    notebook<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'小米笔记本'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 转为响应式</span>
  <span class="token keyword">let</span> reactObj2 <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reactObj<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reactObj2<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以看看打印的，被标记过的 <code>obj</code> 并没有转为 <code>Proxy</code> 响应式代理对象</p> <p><img alt="12" data-src="/vuepress-blog/img/post/2022-01-03-02/12.awebp" loading="lazy" class="lazy"></p> <h3 id="computed-计算属性"><a href="#computed-计算属性" class="header-anchor">#</a> <code>computed</code> 计算属性</h3> <p>在<code>Vue3</code>中使用<code>computed</code> 和<code>Vue2.X</code> 有些不同，这里 <code>computed</code>是一个方法</p> <blockquote><p>首先还是得导入 <code>computed</code> 方法</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>参数为一个回调 默认为 <code>get</code></p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>getInfo<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'小浪'</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span>
    <span class="token comment">//计算属性</span>
    <span class="token keyword">let</span> getInfo <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我的名字：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,今年</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>age<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，请多多指教</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">,</span>
        age<span class="token punctuation">,</span>
        getInfo<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img alt="13" data-src="/vuepress-blog/img/post/2022-01-03-02/13.awebp" loading="lazy" class="lazy"></p> <p>这里没有实现 · 方法，所以修改下面没有用</p> <blockquote><p>参数为一个<em>对象</em> 在这里写 <code>get</code> <code>set</code></p></blockquote> <p>模板和上面一样</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'小浪'</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> getInfo <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// get 方法</span>
        <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>age<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// set 方法</span>
        <span class="token keyword">set</span><span class="token punctuation">(</span>val<span class="token operator">:</span> string<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> arr <span class="token operator">=</span> val<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>
            name<span class="token punctuation">.</span>value <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
            age<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">,</span>
        age<span class="token punctuation">,</span>
        getInfo<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><img alt="14" data-src="/vuepress-blog/img/post/2022-01-03-02/14.awebp" loading="lazy" class="lazy"></p> <h3 id="watch-侦听器"><a href="#watch-侦听器" class="header-anchor">#</a> <code>watch</code> 侦听器</h3> <p>和 Vue2.X 的 Watch 使用方法差不多</p> <blockquote><p>介绍</p></blockquote> <p>watch(data,handler,object)</p> <ol><li><code>data</code>：可以是返回值的 <code>getter</code> 函数，也可以是 <code>ref</code></li> <li><code>handler</code>：回调函数</li> <li><code>object</code>：可选配置项 <code>{ immediate: true }</code></li></ol> <blockquote><p>引入</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
</code></pre></div><blockquote><p><code>data</code> 为一个 <code>ref</code></p></blockquote> <p>回调函数的参数是 (新值,旧值)</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'小浪'</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> watchName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newName<span class="token punctuation">,</span> oldName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        watchName<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我是新姓名</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
		我是老姓名</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>oldName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">,</span>
        age<span class="token punctuation">,</span>
        watchName<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p><img alt="15" data-src="/vuepress-blog/img/post/2022-01-03-02/15.awebp" loading="lazy" class="lazy"></p> <p>可以看见页面第三栏没有显示，因为 <code>name</code> 值没有变化，所以就不用改变，<code>watch</code>的第三个参数是 配置对象，我们在里面可以设置 立即执行 <code>{ immediate: true }</code></p> <p>就会执行一次 当然这个时候 <code>oldName</code> 为 <code>undefined</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">watch</span><span class="token punctuation">(</span>
  name<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">newName<span class="token punctuation">,</span> oldName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    watchName<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我是新姓名</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  我是老姓名</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>oldName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><p><img alt="16" data-src="/vuepress-blog/img/post/2022-01-03-02/16.awebp" loading="lazy" class="lazy"></p> <blockquote><p><code>data</code> 为一个 <code>getter</code></p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>haha<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newName<span class="token punctuation">,</span> oldName</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// 处理...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>()=&gt; haha</code> 直接返回一个值，相当于 <code>getter</code> 简写,<code>haha</code>可以不是响应式数据</p> <blockquote><p><code>data</code> 为多个 <code>ref</code></p></blockquote> <p>模板还是之前那个</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>getInfo<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>我们可以把多个 <code>ref</code> 放进一个数组里面</p> <p><code>newNameAndAge</code>，<code>oldNameAndAge</code>为一个数组保存着 新 和 旧的 [name,age]</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'小浪'</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> watchName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>
      <span class="token punctuation">[</span>name<span class="token punctuation">,</span> age<span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">newNameAndAge<span class="token punctuation">,</span> oldNameAndAge</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        watchName<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">new: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newNameAndAge<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        old: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>oldNameAndAge<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">,</span>
        age<span class="token punctuation">,</span>
        watchName<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p><img alt="17" data-src="/vuepress-blog/img/post/2022-01-03-02/17.awebp" loading="lazy" class="lazy"></p> <blockquote><p><code>data</code> 为 <code>reactive</code></p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'小浪'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> watchInfo <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token function">watch</span><span class="token punctuation">(</span>
    user<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">newInfo<span class="token punctuation">,</span> oldInfo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newInfo <span class="token operator">===</span> oldInfo<span class="token punctuation">)</span>  <span class="token comment">// true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里是对象 会出现问题，立即执行后，</p> <p>如果加上 立即执行 除了第一次 <code>newInfo</code>为 <code>{name: '小浪',age: 21}</code></p> <p><code>oldInfo</code> 为 <code>undefined</code> ，之后<strong>始终返回该对象的当前值</strong></p> <p>所以 <code>newInfo</code> = <code>oldInfo</code></p> <p>对于这个问题，我们得加上配置对象 <code>{deep: true}</code>进行深度检测</p> <p>深度检测还可以判断多重嵌套</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">watch</span><span class="token punctuation">(</span>
  user<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">newInfo<span class="token punctuation">,</span> oldInfo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newInfo <span class="token operator">===</span> oldInfo<span class="token punctuation">)</span> <span class="token comment">// false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> deep<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><h3 id="watcheffect"><a href="#watcheffect" class="header-anchor">#</a> watchEffect</h3> <p>这个也是用来监听数据变化，默认就会执行一次所以这里就不需要配置，而且不用指定 <code>data</code>,使用哪些响应式数据就监听哪些</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'小浪'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 只有 user.name 发生改变这个就会执行</span>
<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="provide-inject"><a href="#provide-inject" class="header-anchor">#</a> provide / inject</h3> <p>提供 和 注入 是很简单理解的</p> <blockquote><p>实现跨层级组件(祖孙)间通信</p></blockquote> <p>在多层嵌套组件中使用，不需要将数据一层一层地向下传递</p> <p>可以实现 跨层级组件 通信</p> <p>在 父组件中</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">'Vue3学习'</span>
        date<span class="token operator">:</span> <span class="token string">'2021/7/23'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 提供数据 提供的数据名，数据值</span>
    <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">,</span> info<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        info
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在 子孙 层级组件使用注入就能够获取到了</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//获取对应数据的值</span>
    <span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        info
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="teleport-传送组件"><a href="#teleport-传送组件" class="header-anchor">#</a> Teleport 传送组件</h3> <p>这个组件特别有趣，可以把组件进行传送</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>teleport v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;flag&quot;</span> to<span class="token operator">=</span><span class="token string">&quot;.test&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;dog&quot;</span><span class="token operator">&gt;</span>狗子<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>teleport<span class="token operator">&gt;</span>
</code></pre></div><p><code>to</code> 是目标的地址 <code>body</code> , <code>#XXX</code> , <code>.XXX</code> 这些都是 <code>css</code> 选择器</p> <p>下面写个例子大家看下就明白了</p> <blockquote><p>模板</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>li_1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>li_2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>li_3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>teleport</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>target<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://img0.baidu.com/it/u=3077713857,1222307962&amp;fm=26&amp;fmt=auto&amp;gp=0.jpg<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>teleport</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>btnGroup<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>target = '.li_1'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>传送1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>target = '.li_2'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>传送2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>target = '.li_3'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>传送3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>setup</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// target</span>
  <span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'.li_1'</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    target<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>利用 按钮 点击来控制 <code>teleport</code> 是否显示， <code>teleport</code> 一渲染，就会跑到 <code>li</code> 下面</p> <p><img alt="18" data-src="/vuepress-blog/img/post/2022-01-03-02/18.awebp" loading="lazy" class="lazy"></p> <h3 id="vue3-生命周期"><a href="#vue3-生命周期" class="header-anchor">#</a> Vue3 生命周期</h3> <blockquote><p><code>Vue2.X</code> 对应 <code>Vue3</code>组合API</p></blockquote> <table><thead><tr><th><code>Vue2.X</code></th> <th></th> <th><code>Vue3</code></th></tr></thead> <tbody><tr><td>beforeCreate</td> <td>---&gt;</td> <td><code>setup()</code></td></tr> <tr><td>created</td> <td>---&gt;</td> <td><code>setup()</code></td></tr> <tr><td>beforeMount</td> <td>---&gt;</td> <td>onBeforeMount</td></tr> <tr><td>mounted</td> <td>---&gt;</td> <td>onMounted</td></tr> <tr><td>beforeUpdate</td> <td>---&gt;</td> <td>onBeforeUpdate</td></tr> <tr><td>updated</td> <td>---&gt;</td> <td>onUpdated</td></tr> <tr><td>beforeDestroy</td> <td>---&gt;</td> <td><code>onBeforeUnmount</code></td></tr> <tr><td>destroyed</td> <td>---&gt;</td> <td><code>onUnmounted</code></td></tr> <tr><td>activated</td> <td>---&gt;</td> <td>onActivated</td></tr> <tr><td>deactivated</td> <td>---&gt;</td> <td>onDeactivated</td></tr> <tr><td>errorCaptured</td> <td>---&gt;</td> <td>onErrorCaptured</td></tr> <tr><td></td> <td></td> <td>onRenderTriggered</td></tr> <tr><td></td> <td></td> <td>onRenderTracked</td></tr></tbody></table> <p>可以看出</p> <p><code>beforeCreate</code> 和 <code>created</code> 在Vu3还是能正常使用，在Vue3我们可以用更好更快的 <code>setup</code> 代替</p> <p><code>on</code>开头的 生命周期需要 通过 <code>import</code> 导入，在 <code>setup</code> 函数中使用</p> <p><code>Vue3</code> 的生命周期 比 <code>Vue2.X</code> 的生命周期快</p> <p>举个例子: <code>onBeforeMount</code> 比 <code>beforeMount</code> 快 其他同理</p> <p>还多个两个钩子:</p> <ul><li><code>onRenderTriggered</code> 跟踪虚拟 DOM 重新渲染时调用</li> <li><code>onRenderTracked</code> 当虚拟 DOM 重新渲染被触发时调用</li></ul> <h3 id="全局api-转移"><a href="#全局api-转移" class="header-anchor">#</a> 全局API 转移</h3> <p><code>Vue2.X</code> 中 <code>Vue</code> 上面的全局API ，比如自定义指令 <code>Vue.directive</code>，全局组件 <code>Vue.component</code> 在Vue3都进行改变，不再提供 <code>Vue</code> ，而是提供 <code>app</code></p> <p>具体改变可以看下面</p> <table><thead><tr><th><strong>Vue2.X</strong></th> <th>Vue3</th></tr></thead> <tbody><tr><td>Vue.config</td> <td>Vue.config</td></tr> <tr><td>Vue.config.productionTip</td> <td>移除</td></tr> <tr><td>Vue.config.ignoredElements</td> <td>app.config.isCustomElement</td></tr> <tr><td>Vue.component</td> <td>app.component</td></tr> <tr><td>Vue.directive</td> <td>app.directive</td></tr> <tr><td>Vue.mixin</td> <td>app.mixin</td></tr> <tr><td>Vue.use</td> <td>app.use</td></tr> <tr><td>Vue.prototype</td> <td>app.config.globalProperties</td></tr> <tr><td>new Vue().$mount('#app')</td> <td>createApp(App).mount('#app')</td></tr></tbody></table> <h2 id="结语"><a href="#结语" class="header-anchor">#</a> 结语</h2> <p>到了这里我们基本都了解了 <code>Vue3</code> 的一些特性</p> <ul><li>新的脚手架工具<code>vite</code></li> <li>在 <code>Vue3</code> 仍然支持 <code>Vue2</code> 中的大多数特性</li> <li><code>Vue</code> 组合<code>APi</code>代替了<code>Vue2</code>中的<code>option API</code> ，同一逻辑集中起来，复用性更强了</li> <li><code>Vue3</code> 使用 <code>TS</code> 编写更好的支持TS</li> <li><code>Vue3</code> 使用<code>Proxy</code> 代替了<code>Vue2</code>中<code>Object.defineProperty()</code> 实现响应式原理</li> <li>介绍了新的组件: <code>Fragment</code> <code>Teleport</code> <code>Suspense</code></li></ul> <p>这里还没有提到的 <code>Vue3</code> 重写了 <strong>虚拟DOM</strong> ，提高了性能</p> <p>希望这篇笔记能够帮助到大家，如果我写的不清楚，具体的还得看 官方文档 yyds，最近开学了，学校里面的事情也多了...</p> <p>(o゜▽゜)o☆</p> <blockquote><p>参考资料：</p></blockquote> <p><a href="https://vue3js.cn/docs/zh" target="_blank" rel="noopener noreferrer">Vue3官网文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.bilibili.com/video/BV1Zy4y1K7SH?p=156" target="_blank" rel="noopener noreferrer">B站资料<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div></article> <section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      发布时间 : 2022-01-03
    </span> <!----></section> <section class="post-links" data-v-4e23451f><a href="/vuepress-blog/posts/2022/01/03/_03.html" class="post-link" data-v-4e23451f>
      上一篇 : 【Vue】带你快速上手Vue3 - 使用 - Composition API - 响应式原理 - 新特性
    </a> <a href="/vuepress-blog/posts/2022/01/03/_01.html" class="post-link" data-v-4e23451f>
      下一篇 : yarn &amp; npm 使用和取消 taobao 镜像,以及使用cnpm
    </a></section></section> <!----></div></main> <aside class="aside" data-v-4dd605a1><div class="info-card main-div" data-v-9d847660 data-v-4dd605a1><div class="info-card-header" data-v-9d847660><img src="/vuepress-blog/img/avatar.jpg" alt="William Wu" class="info-avatar" data-v-9d847660></div> <div class="info-card-body" data-v-9d847660><section class="info-nickname" data-v-9d847660>
      William Wu
    </section> <section class="info-desc" data-v-9d847660>Nothing is true,everything is permitted.(万物皆虚,万事皆允。)</section> <section class="info-contact" data-v-9d847660><section data-v-9d847660><span title="Guangzhou City, China" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>Guangzhou City, China</title><use xlink:href="#icon-location" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          Guangzhou City, China
        </span></span></section> <!----> <section data-v-9d847660><a href="mailto:williamwutianyu@qq.com" title="williamwutianyu@qq.com" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>williamwutianyu@qq.com</title><use xlink:href="#icon-email" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          williamwutianyu@qq.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-9d847660><section class="info-sns clearfix" data-v-9d847660><a href="https://github.com/william-wu97" target="_blank" class="sns-link" data-v-9d847660><span title="GitHub: william-wu97" class="sns-icon" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1.5em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>GitHub: william-wu97</title><use xlink:href="#icon-github" data-v-9d847660 data-v-9d847660></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-4dd605a1><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span>文章目录</span> <div class="post-nav-toc"><ul><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#vue3-简介">Vue3 简介</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#基础工作">基础工作</a><ul><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#安装-vue-cli">安装 vue-cli</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#创建一个项目">创建一个项目</a></li></ul></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#vue3-入门">Vue3 入门</a><ul><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#composition-api">Composition API</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#fragment">Fragment</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#script-差异">script 差异</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#setup">setup</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#ref">ref</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#ref-获取元素">ref 获取元素</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#torefs">toRefs</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#toref">toRef</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#判断响应式">判断响应式</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#customref">customRef</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#shallowref-和-shallowreactive">shallowRef 和 shallowReactive</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#readonly-和-shallowreadonly">readonly 和 shallowReadonly</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#toraw-和-markraw">toRaw 和 markRaw</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#computed-计算属性">computed 计算属性</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#watch-侦听器">watch 侦听器</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#watcheffect">watchEffect</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#provide-inject">provide / inject</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#teleport-传送组件">Teleport 传送组件</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#vue3-生命周期">Vue3 生命周期</a></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#全局api-转移">全局API 转移</a></li></ul></li><li><a href="/vuepress-blog/posts/2022/01/03/_02.html#结语">结语</a></li></ul></div></div> <!----></div></aside></div> <footer class="footer" data-v-1375e54c><p class="footer-sns-links" data-v-1375e54c><a href="https://github.com/william-wu97" target="_blank" class="sns-link" data-v-1375e54c><span title="GitHub: william-wu97" class="sns-icon" data-v-1375e54c data-v-1375e54c><svg class="icon" style="font-size:25px;" data-v-1375e54c data-v-1375e54c><title data-v-1375e54c data-v-1375e54c>GitHub: william-wu97</title><use xlink:href="#icon-github" data-v-1375e54c data-v-1375e54c></use></svg></span></a></p> <p class="footer-text" data-v-1375e54c><span data-v-1375e54c>Powered by </span> <a href="https://github.com/vuejs/vuepress" target="_blank" data-v-1375e54c>
      VuePress
    </a> <span data-v-1375e54c> | </span> <a href="https://github.com/meteorlxy/vuepress-theme-meteorlxy" target="_blank" data-v-1375e54c>
        meteorlxy
      </a></p> <!----></footer></div><div class="global-ui"><!----><!----><div class="cat-container" data-v-a13867c0><canvas id="vuepress-cat" width="280" height="250" class="live2d" data-v-a13867c0></canvas></div><div class="reading-progress top" data-v-21b39eda><div class="progress" data-v-21b39eda></div></div></div></div>
    <script src="/vuepress-blog/assets/js/app.6e00fe84.js" defer></script><script src="/vuepress-blog/assets/js/7.2d53fe4f.js" defer></script><script src="/vuepress-blog/assets/js/57.3c28d478.js" defer></script>
  </body>
</html>
