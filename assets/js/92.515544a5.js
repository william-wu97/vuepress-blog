(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{479:function(t,a,s){"use strict";s.r(a);var n=s(1),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("本文转载自："),s("a",{attrs:{href:"https://blog.csdn.net/qq_42543244/article/details/125064663",target:"_blank",rel:"noopener noreferrer"}},[t._v("uView：如何正确的使用防抖和节流，以及如何解决错误：TypeError: Property value expected type of string but got null"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),s("p",[t._v("最近在看uview，QQ群成员提出的问题，有几个关于节流防抖的方法使用，不是很熟练，尤其是当遇到传递参数的时候，很懵逼。。。本篇就来着重记录一下这些个问题，以及如何正确的去使用；")]),t._v(" "),s("p",[t._v("首先，我们要搞清楚，节流防抖是什么？以及他们的使用场景！关于这点，在uview的官网上，其实已经写的挺明确了。。。"),s("a",{attrs:{href:"https://v1.uviewui.com/js/debounce.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("throttle & debounce节流防抖 | uView - 多平台快速开发的UI框架 - uni-app UI框架"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("这里就不再多说，直接进入正题")]),t._v(" "),s("h2",{attrs:{id:"节流"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#节流"}},[t._v("#")]),t._v(" 节流")]),t._v(" "),s("p",[t._v("关于节流，使用场景最多的恐怕就是 表单的提交，为了防止表单重复的提交，造成多次请求的触发，可能会造成接口数据的混乱，所以这个时候，我们往往使用到了节流！")]),t._v(" "),s("p",[t._v("请看uview这个提示：关于使用u-button组件，我们只需要配置throttle-time即可，而且是已经默认500ms")]),t._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"1","data-src":"/vuepress-blog/img/post/2023-08-14-01/1.webp",loading:"lazy"}})]),t._v(" "),s("h3",{attrs:{id:"无传递参数："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#无传递参数："}},[t._v("#")]),t._v(" 无传递参数：")]),t._v(" "),s("h3",{attrs:{id:"_1-在模板中使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-在模板中使用"}},[t._v("#")]),t._v(" 1. 在模板中使用")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("$u.throttle(submit, 1000)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("节流不传递参数"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n \nsubmit() {\n\tconsole.log('提交表单');\n},\n")])])]),s("h3",{attrs:{id:"_2-在js中调用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-在js中调用"}},[t._v("#")]),t._v(" 2. 在js中调用")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("submitForm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("节流不传递参数"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n \nsubmit() {\n\tconsole.log('提交表单');\n},\nsubmitForm() {\n\tthis.$u.throttle(this.submit, 1000); //注意此处万万不能写成this.submit(),否则节流无效\n}\n")])])]),s("h3",{attrs:{id:"有参数传递"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#有参数传递"}},[t._v("#")]),t._v(" 有参数传递")]),t._v(" "),s("h3",{attrs:{id:"_1-错误示范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-错误示范"}},[t._v("#")]),t._v(" 1. 错误示范")]),t._v(" "),s("p",[t._v("No1.")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("$u.throttle(submit(999), 1000)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("节流传递参数"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n \nsubmit(id) {\n\tconsole.log('id===>', id);\n\tconsole.log('提交表单');\n}\n")])])]),s("p",[t._v("传递参数，理所当然的想到这么写，但是当我们 ctrl+s 之后。。。会发现如下：")]),t._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"2","data-src":"/vuepress-blog/img/post/2023-08-14-01/2.webp",loading:"lazy"}})]),t._v(" "),s("p",[t._v("No2.")]),t._v(" "),s("p",[t._v("当然，你还有可能这么写？")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("$u.throttle(() => submit(999), 1000)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("节流传递参数"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("然后依然报错，与上述错误一样。。。")]),t._v(" "),s("p",[t._v("No3.")]),t._v(" "),s("p",[t._v("然后你可能会寻思，那我在模板中无法使用，那我写js中还不行吗？")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("submitForm(999)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("节流传递参数"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n \nsubmit(id) {\n\tconsole.log('id===>', id);\n\tconsole.log('提交表单');\n},\nsubmitForm(id){\n\tthis.$u.throttle(this.submit(id),1000)\n}\n")])])]),s("p",[t._v("ok,保存，编译并没有报错，很开心啊，然后点击测试发现-.-，节流没起作用，尴尬了。。。")]),t._v(" "),s("h3",{attrs:{id:"_2-正确写法："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-正确写法："}},[t._v("#")]),t._v(" 2. 正确写法：")]),t._v(" "),s("p",[t._v("使用回调函数")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("submitForm(999)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("节流传递参数"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n \nsubmit(id) {\n\tconsole.log('id===>', id);\n\tconsole.log('提交表单');\n},\nsubmitForm(id){\n\tthis.$u.throttle(()=>this.submit(id),1000) //注意，当我们需要传递参数的时候，需要写一个回调函数，这里采用es6的箭头函数\n}\n")])])]),s("p",[t._v("再或者使用高阶函数")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("submitForm(999)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("节流传递参数"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n \nsubmit(id) {\n\treturn () => {\n\t\tconsole.log('id===>', id);\n\t\tconsole.log('提交表单');\n\t};\n},\nsubmitForm(id) {\n\tthis.$u.throttle(this.submit(id), 1000); //注意，当我们需要传递参数的时候，需要写一个回调函数，这里采用es6的箭头函数\n}\n")])])]),s("p",[t._v("这个时候再次测试，发现一切正常，请记住此方法。。。")]),t._v(" "),s("h3",{attrs:{id:"反思错误：typeerror-property-value-expected-type-of-string-but-got-null"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#反思错误：typeerror-property-value-expected-type-of-string-but-got-null"}},[t._v("#")]),t._v(" 反思错误：TypeError: Property value expected type of string but got null")]),t._v(" "),s("p",[t._v("为什么会出现此错误？")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click.stop")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("click(submit(987))"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("click"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h2",{attrs:{id:"防抖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#防抖"}},[t._v("#")]),t._v(" 防抖")]),t._v(" "),s("p",[t._v("知道了节流怎么写之后，防抖就很简单了，写法一致即可")]),t._v(" "),s("h3",{attrs:{id:"无传递参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#无传递参数"}},[t._v("#")]),t._v(" 无传递参数")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("placeholder")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("请输入要搜索的内容"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@input")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("$u.debounce(getList, 500)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n \ngetList() {\n\tconsole.log('获取内容');\n}\n")])])]),s("h3",{attrs:{id:"有参数传递-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#有参数传递-2"}},[t._v("#")]),t._v(" 有参数传递")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("placeholder")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("请输入要搜索的内容"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@input")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("input($event, 999)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n \ngetList(value, id) {\n\tconsole.log('获取内容');\n\tconsole.log(value, id);\n},\ninput({ detail }, id) {\n\tlet value = detail.value;\n\tthis.$u.debounce(() => this.getList(value, id), 500);\n}\n")])])]),s("p",[t._v("问题不是很大~~~")])])}),[],!1,null,null,null);a.default=e.exports}}]);