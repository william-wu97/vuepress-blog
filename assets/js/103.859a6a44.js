(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{491:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("blockquote",[a("p",[t._v("本文转载自："),a("a",{attrs:{href:"https://blog.csdn.net/weixin_42678675/article/details/121023008",target:"_blank",rel:"noopener noreferrer"}},[t._v("【uniapp】解决编译成微信小程序时，自定义组件会多一级父级节点"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"_1-背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-背景"}},[t._v("#")]),t._v(" 1. 背景")]),t._v(" "),a("p",[a("code",[t._v("uniapp")]),t._v(" 中的自定义组件，DOM节点如下")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<div class="father">\n\t<div class="son"></div>\n</div>\n')])])]),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"1","data-src":"/vuepress-blog/img/post/2024-05-09-01/1.webp",loading:"lazy"}})]),t._v(" "),a("p",[t._v("编译成 "),a("code",[t._v("微信小程序")]),t._v(" 之后的节点如下")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<div class="father">\n\t<div class="多出来的节点">\n\t\t<div class="son"></div>\n\t</div>\n</div>\n')])])]),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"2","data-src":"/vuepress-blog/img/post/2024-05-09-01/2.webp",loading:"lazy"}})]),t._v(" "),a("h2",{attrs:{id:"_2-原因"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-原因"}},[t._v("#")]),t._v(" 2. 原因")]),t._v(" "),a("p",[t._v("从官方文档了解到")]),t._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"3","data-src":"/vuepress-blog/img/post/2024-05-09-01/3.webp",loading:"lazy"}})]),t._v(" "),a("h2",{attrs:{id:"_3-解决方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-解决方法"}},[t._v("#")]),t._v(" 3. 解决方法")]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("自定义组件")]),t._v(" 中加入如下 "),a("code",[t._v("options")]),t._v(" 属性，特别是第四个属性，会使其更接近 "),a("code",[t._v("vue组件")]),t._v(" 的表现 "),a("a",{attrs:{href:"https://uniapp.dcloud.io/vue-api?id=%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文档"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  props"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  options"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 微信小程序中 options 选项")]),t._v("\n    multipleSlots"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  在组件定义时的选项中启动多slot支持，默认启用")]),t._v("\n    styleIsolation"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"isolated"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  启动样式隔离。当使用页面自定义组件，希望父组件影响子组件样式时可能需要配置。具体配置选项参见：微信小程序自定义组件的样式")]),t._v("\n    addGlobalClass"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  表示页面样式将影响到自定义组件，但自定义组件中指定的样式不会影响页面。这个选项等价于设置 styleIsolation: apply-shared")]),t._v("\n    virtualHost"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  将自定义节点设置成虚拟的，更加接近Vue组件的表现。我们不希望自定义组件的这个节点本身可以设置样式、响应 flex 布局等，而是希望自定义组件内部的第一层节点能够响应 flex 布局或者样式由自定义组件本身完全决定")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("加完如上属性后，编译出来的多余节点便不会出现")]),t._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"4","data-src":"/vuepress-blog/img/post/2024-05-09-01/4.webp",loading:"lazy"}})])])}),[],!1,null,null,null);s.default=e.exports}}]);